let client,page;const BASE_IMAGE_URL="https://images.ctfassets.net/",ENTRIES={home:"3HNo4cZbc7eKortwfaOzOf",business:"2d29rmKQNdknaC0MW7sDtf"};let hasScrolled=!1;const mainModule=function(e){return init=function(){configureContent()},configureContent=function(){client=contentful.createClient({space:"nbpmbu0iyv08",accessToken:"wDINDuN3Vtyxq0orSCGfl7m3jFaJopZs3jCE5KNBPfk"}),page=e.querySelector("body").id,"home"===page?getHomePageData():"about"===page&&getValuesData(),addSiteListeners(),getBusinessData()},getHomePageData=function(){client.getEntry(ENTRIES.home).then((function(e){const{introTitleLine1:t,bodyCopy:o,valuesTitle:n,introVideo:i,introVideoMp4:r,videoPoster:l,vimeoVideoId:s}=e.fields;addContent(t,".page-intro-title"),addContent(o,".home-quote"),addIntroVideo(i,r,l,".page-intro-video"),addVideo(s,".video-iframe")}))},getValuesData=function(){client.getEntries({content_type:"values"}).then((function(t){const o=t.items;let n="";const i=[];o.forEach(e=>{const t=addValueItem(e.fields);i.push(t)}),i.sort((function(e,t){return e.order-t.order})),i.forEach(e=>{n+=e.valueMarkup}),e.querySelector(".home-values-list").innerHTML=n}))},addValueItem=function(e){const{valueTitle:t,valueDescription:o,valueIcon:n,order:i}=e;if(t&&o&&n){return{order:i,valueMarkup:`<li class="value-item" data-id="${t}">\n        <img src="${n.fields.file.url}" alt="${t}" class="value-image">\n        <div class="value-content">\n          <h4 class="value-title">${t}</h4>\n          <p class="value-description">${o}</p>\n        </div>\n      </li>`}}console.error("DOM element does not exist",$selector)},getBusinessData=function(){client.getEntry(ENTRIES.business).then((function(e){const{addressLine1:t,addressLine2:o,email:n}=e.fields;addContent(t,".footer-address-line-1"),addContent(o,".footer-address-line-2"),addEmailLink(n,".footer-email"),addCopyrightYear(".footer-copyright-year")}))},addSiteListeners=function(){e.querySelector(".site-nav-toggle").addEventListener("click",onSiteNavToggleClick),"home"===page&&(e.querySelector(".page-intro-video").onclick=e=>{playIntroVideo(e)},window.addEventListener("scroll",onScroll))},onScroll=function(t){if(hasScrolled)return void window.removeEventListener("scroll",onScroll);const o=checkIfVideoPlaying(e.querySelector(".page-intro-video"));hasScrolled=!0,o||playIntroVideo()},checkIfVideoPlaying=e=>!!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2),playIntroVideo=()=>{e.querySelector(".page-intro-video").play()},onSiteNavToggleClick=t=>{t.currentTarget.parentElement.classList.toggle("active"),e.body.classList.toggle("nav-active")},addContent=function(t,o){if(t){const n=e.querySelector(o);n?n.innerHTML=t:console.error("DOM element does not exist",o)}else console.error("data does not exist",t)},addImage=function(t,o){if(t){e.querySelector(o)?e.querySelector(o).setAttribute("src",`https:${t.fields.file.url}`):console.error("image element does not exist",o)}else console.error("data does not exist",t)},addEmailLink=function(t,o){if(t){const n=e.querySelector(o);n?(n.setAttribute("href",`mailto:${t}`),n.innerHTML=t):console.error("DOM element does not exist",o)}else console.error("data does not exist",content)},addIntroVideo=function(t,o,n,i){const r=e.querySelector(i);if(r){let e="";if(t){e+=`<source src='${t.fields.file.url}' type='video/webm'/>`}if(o){e+=`<source src='${o.fields.file.url}' type='video/mp4'/>`}r.innerHTML=e,r.setAttribute("poster",n.fields.file.url)}},addVideo=function(t,o){if(t){const n=e.querySelector(o);n?n.setAttribute("src",`https://player.vimeo.com/video/${t}?title=0&byline=0&portrait=0`):console.error("video element does not exist",o)}else console.error("video data does not exist",t)},addCopyrightYear=function(t){if(e.querySelector(t)){const o=new Date;e.querySelector(t).innerHTML=o.getFullYear()}else console.error("DOM element does not exist",t)},{init:init,page:page}}(document);window.onload=function(){mainModule.init()};